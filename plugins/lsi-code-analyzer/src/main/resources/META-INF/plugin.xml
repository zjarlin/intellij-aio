<idea-plugin>
    <id>site.addzero.lsi-code-analyzer</id>
    <name>LSI Code Analyzer</name>
    <vendor email="zjarlin@outlook.com" url="https://gitee.com/zjarlin">zjarlin</vendor>

    <description><![CDATA[
        <h1>LSI Code Analyzer - POJO元数据管理与DDL生成工具</h1>
        <p>基于LSI（语言结构接口）抽象层，扫描项目中的POJO类，提取元数据并支持多方言DDL生成</p>
        
        <h2>功能特性</h2>
        <ul>
            <li>自动/手动扫描项目中的POJO类</li>
            <li>可视化展示POJO元数据（类名、字段、注解等）</li>
            <li>多数据库方言DDL生成（MySQL/PostgreSQL/Oracle/H2/达梦/TaosDB）</li>
            <li>支持Jimmer框架特有注解解析</li>
            <li>JTE模板引擎支持自定义代码生成</li>
            <li>可扩展的元数据增强器（Extension Point）</li>
            <li>导出元数据为JSON和Kotlin Data Class</li>
        </ul>
        
        <h2>扩展开发</h2>
        <p>其他插件可以通过 metadataEnhancer 扩展点添加自定义的元数据解析器</p>
        
        <h2>使用方法</h2>
        <ol>
            <li>打开右侧 LSI Code Analyzer 工具窗口</li>
            <li>点击"扫描"按钮扫描项目POJO</li>
            <li>选择POJO查看字段详情</li>
            <li>使用DDL生成功能生成各方言SQL</li>
            <li>在模板配置Tab中自定义JTE模板</li>
        </ol>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <!-- 扩展点声明 -->
    <extensionPoints>
        <extensionPoint 
            name="metadataEnhancer"
            interface="site.addzero.lsi.analyzer.extension.LsiMetadataEnhancer"
            dynamic="true"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="site.addzero.lsi.analyzer.settings.PojoMetaSettingsService"/>
        
        <projectService serviceImplementation="site.addzero.lsi.analyzer.service.PojoScanService"/>

        <toolWindow id="LSI Code Analyzer"
                    anchor="right"
                    factoryClass="site.addzero.lsi.analyzer.toolwindow.PojoMetaToolWindowFactory"
                    icon="AllIcons.Nodes.Class"
                    secondary="false"/>

        <notificationGroup id="LSI Code Analyzer Notifications" displayType="BALLOON" isLogByDefault="true"/>
        
        <postStartupActivity implementation="site.addzero.lsi.analyzer.PojoMetaStartupActivity"/>
    </extensions>
    
    <!-- 内置的 Jimmer 增强器 -->
    <extensions defaultExtensionNs="site.addzero.lsi-code-analyzer">
        <metadataEnhancer implementation="site.addzero.lsi.analyzer.extension.JimmerMetadataEnhancer"/>
    </extensions>

    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <supportsKotlinPluginMode supportsK2="true"/>
    </extensions>
</idea-plugin>
